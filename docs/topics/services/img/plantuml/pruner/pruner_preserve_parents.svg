<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="872px" preserveAspectRatio="none" style="width:830px;height:872px;background:#F0F8FF;" version="1.1" viewBox="0 0 830 872" width="830px" zoomAndPan="magnify"><defs/><g><rect fill="#F0F8FF" height="872" style="stroke:none;stroke-width:1.0;" width="830" x="0" y="0"/><rect fill="none" height="454.2344" style="stroke:#000000;stroke-width:1.5;" width="814" x="10" y="269.6836"/><rect fill="none" height="291.3711" style="stroke:#000000;stroke-width:1.5;" width="794" x="20" y="425.5469"/><rect fill="none" height="200.1289" style="stroke:#000000;stroke-width:1.5;" width="774" x="30" y="509.7891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="96" x2="96" y1="36.4883" y2="820.8496"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="391.5" x2="391.5" y1="36.4883" y2="820.8496"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="736" x2="736" y1="36.4883" y2="820.8496"/><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="112" x="40" y="5"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="47" y="25.5352">Pruner Service</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="112" x="40" y="819.8496"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="47" y="840.3848">Pruner Service</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="93" x="345.5" y="5"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="352.5" y="25.5352">UTXO Store</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="93" x="345.5" y="819.8496"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="352.5" y="840.3848">UTXO Store</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="116" x="678" y="5"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="685" y="25.5352">Aerospike/SQL</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="116" x="678" y="819.8496"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="685" y="840.3848">Aerospike/SQL</text><path d="M41,51.4883 L41,76.4883 L790,76.4883 L790,61.4883 L780,51.4883 L41,51.4883 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M780,51.4883 L780,61.4883 L790,61.4883 L780,51.4883 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="236" x="293" y="69.0566">Phase 1: Parent Preservation Detail</text><polygon fill="#666666" points="380,114.4199,390,118.4199,380,122.4199,384,118.4199" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="96" x2="386" y1="118.4199" y2="118.4199"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272" x="103" y="98.3672">PreserveParentsOfOldUnminedTransactions</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="103" y="113.6777">(currentHeight)</text><line style="stroke:#666666;stroke-width:1.0;" x1="392" x2="434" y1="167.752" y2="167.752"/><line style="stroke:#666666;stroke-width:1.0;" x1="434" x2="434" y1="167.752" y2="180.752"/><line style="stroke:#666666;stroke-width:1.0;" x1="393" x2="434" y1="180.752" y2="180.752"/><polygon fill="#666666" points="403,176.752,393,180.752,403,184.752,399,180.752" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="399" y="142.9883">Calculate cutoffHeight</text><text fill="#333333" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="330" x="399" y="162.166">currentHeight - UnminedTxRetention</text><polygon fill="#666666" points="724,221.373,734,225.373,724,229.373,728,225.373" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="392" x2="730" y1="225.373" y2="225.373"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217" x="399" y="205.3203">Query: Find Unmined Transactions</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240" x="399" y="220.6309">WHERE unmined_since &lt; cutoffHeight</text><polygon fill="#666666" points="403,250.6836,393,254.6836,403,258.6836,399,254.6836" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="397" x2="735" y1="254.6836" y2="254.6836"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="409" y="249.9414">List of Old Unmined Txs</text><path d="M10,269.6836 L84,269.6836 L84,276.9941 L74,286.9941 L10,286.9941 L10,269.6836 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="454.2344" style="stroke:#000000;stroke-width:1.5;" width="814" x="10" y="269.6836"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="25" y="283.252">loop</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="204" x="99" y="282.3184">[For Each Old Unmined Transaction]</text><polygon fill="#666666" points="724,319.6152,734,323.6152,724,327.6152,728,323.6152" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="392" x2="730" y1="323.6152" y2="323.6152"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="399" y="303.5625">Get Transaction Metadata</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="399" y="318.873">(includes inpoints)</text><polygon fill="#666666" points="403,348.9258,393,352.9258,403,356.9258,399,352.9258" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="397" x2="735" y1="352.9258" y2="352.9258"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="409" y="348.1836">Transaction Metadata</text><line style="stroke:#666666;stroke-width:1.0;" x1="392" x2="434" y1="397.5469" y2="397.5469"/><line style="stroke:#666666;stroke-width:1.0;" x1="434" x2="434" y1="397.5469" y2="410.5469"/><line style="stroke:#666666;stroke-width:1.0;" x1="393" x2="434" y1="410.5469" y2="410.5469"/><polygon fill="#666666" points="403,406.5469,393,410.5469,403,414.5469,399,410.5469" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="399" y="377.4941">Extract Parent TxIDs</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="399" y="392.8047">from Inpoints</text><path d="M20,425.5469 L94,425.5469 L94,432.8574 L84,442.8574 L20,442.8574 L20,425.5469 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="291.3711" style="stroke:#000000;stroke-width:1.5;" width="794" x="20" y="425.5469"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="35" y="439.1152">loop</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="126" x="109" y="438.1816">[For Each Parent TxID]</text><polygon fill="#666666" points="724,490.7891,734,494.7891,724,498.7891,728,494.7891" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="392" x2="730" y1="494.7891" y2="494.7891"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="399" y="459.4258">Update Parent Transaction:</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="227" x="399" y="474.7363">SET PreserveUntil = currentHeight +</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="399" y="490.0469">ParentPreservationBlocks</text><path d="M30,509.7891 L92,509.7891 L92,517.0996 L82,527.0996 L30,527.0996 L30,509.7891 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="200.1289" style="stroke:#000000;stroke-width:1.5;" width="774" x="30" y="509.7891"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="45" y="523.3574">alt</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="109" x="107" y="522.4238">[Update Successful]</text><polygon fill="#666666" points="403,544.4102,393,548.4102,403,552.4102,399,548.4102" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="397" x2="735" y1="548.4102" y2="548.4102"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="409" y="543.668">Parent Protected</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="30" x2="804" y1="557.4102" y2="557.4102"/><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="83" x="35" y="568.0449">[Update Failed]</text><polygon fill="#666666" points="403,588.6758,393,592.6758,403,596.6758,399,592.6758" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="397" x2="735" y1="592.6758" y2="592.6758"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="409" y="587.9336">Error</text><polygon fill="#666666" points="107,617.9863,97,621.9863,107,625.9863,103,621.9863" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="391" y1="621.9863" y2="621.9863"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="112" x="113" y="617.2441">CRITICAL ERROR</text><path d="M101,634.9863 L101,689.9863 L280,689.9863 L280,644.9863 L270,634.9863 L101,634.9863 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M270,634.9863 L270,644.9863 L280,644.9863 L270,634.9863 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="107" y="652.5547">Abort entire pruning</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="107" y="667.8652">Prevents orphaning</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="107" y="683.1758">resubmitted transactions</text><polygon fill="#666666" points="380,697.918,390,701.918,380,705.918,384,701.918" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="96" x2="386" y1="701.918" y2="701.918"/><polygon fill="#666666" points="107,748.2285,97,752.2285,107,756.2285,103,752.2285" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="391" y1="752.2285" y2="752.2285"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="113" y="747.4863">All Parents Preserved Successfully</text><path d="M101,765.2285 L101,805.2285 L280,805.2285 L280,775.2285 L270,765.2285 L101,765.2285 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M270,765.2285 L270,775.2285 L280,775.2285 L270,765.2285 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="107" y="782.7969">Safe to proceed</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="107" y="798.1074">to Phase 2 (DAH Pruning)</text><text fill="#333333" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="155" x="0" y="862.0059">Last Modified On: 01-Dec-2025</text><!--SRC=[RLJRYjim47tNLmmfXTsqeJSe9RI5NEnk825fBhGFWQArnXiHHJAIlCrI-kyTMxPZRof8d6ZEd3bpipjAdN7BJt3Fa-E3DRaM4wECXHVns_XJ73FN80IcF5S-DjfNa0_bQK6ujUPtPVnO7jQoqhUNYSouzl270OoD5MYxSBfzBcHQ7lQNiJP1RsLpZHOsQ1zbWZtW3i9L5xRR_bp2nXiR8CNVBc24rhXC7l7Dvlkyn4p7Z6dZ4SmZ1GYah-bs2Ft-wi0TmhiXhBX5SbzPTAI0UsaqJD5pgVfznYfnWwzbm64Dm-3bbkbIYPq-IOrYQxbsF2a8t5xV9Baj87Se7mx-bh5IVyCpuIh95ITjIUvDcWRONd-1ZXyCe6O_hz7JFR5Vk8fKlkTeduOGIorgB7Ib_BYBrX7amVRBIPqWVEx4PMmwXa4ZRYwT1vC2vNQXF3l6b34PnDJBY2U7hlaIaLeFq5Ru3NtR3Wkghk2UKv58Yye5Eg3HCf8AUbjwTzJypvLrWWHSTFQMO7L3j-VPb99FhJd1h68FRjqiMl3I-bpzBXD5cshOHSnmhpVHjfc87VL6mVF-lThhuDcUhx4ooR4IKnokV1rcaoS9EfVcgh5U5QIPM1hjnADeaAXef2kYc0QuPReYYMZ3RSSSaYP0cFbYIIRhsNOs6SqXMg-NQzg7DhxSB5jcIRDIEutkZVLG3Af5oEXIwWUgWSN7Ob_0sEp0mnqL9By_IKyPW6yDR2U8HPzRVSbGXvIAP_5XLw97IbK5SarhHAkiwgbw9rmft_0KmHiIRH94iTVqExmbtiFDT7HN0aavxRB2r4DgYCR2dDEoB8oGgQH0Ips4bqK3Rdf231QBnU29Jk_s7m00]--></g></svg>