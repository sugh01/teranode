<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="979px" preserveAspectRatio="none" style="width:1004px;height:979px;background:#F0F8FF;" version="1.1" viewBox="0 0 1004 979" width="1004px" zoomAndPan="magnify"><defs/><g><rect fill="#F0F8FF" height="979" style="stroke:none;stroke-width:1.0;" width="1004" x="0" y="0"/><rect fill="none" height="233.4395" style="stroke:#000000;stroke-width:1.5;" width="278.5" x="617.5" y="554.0781"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="61" x2="61" y1="36.4883" y2="928.0703"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="243" x2="243" y1="36.4883" y2="928.0703"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="396.5" x2="396.5" y1="36.4883" y2="928.0703"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="677.5" x2="677.5" y1="36.4883" y2="928.0703"/><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="113" x="5" y="5"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="12" y="25.5352">Block Persister</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="113" x="5" y="927.0703"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="12" y="947.6055">Block Persister</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="139" x="174" y="5"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="181" y="25.5352">Blockchain Service</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="139" x="174" y="927.0703"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="181" y="947.6055">Blockchain Service</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="112" x="340.5" y="5"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="347.5" y="25.5352">Pruner Service</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="112" x="340.5" y="927.0703"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="347.5" y="947.6055">Pruner Service</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="100" x="627.5" y="5"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="634.5" y="25.5352">Store Pruner</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="100" x="627.5" y="927.0703"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="634.5" y="947.6055">Store Pruner</text><path d="M10,51.4883 L10,76.4883 L727,76.4883 L727,61.4883 L717,51.4883 L10,51.4883 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M717,51.4883 L717,61.4883 L727,61.4883 L717,51.4883 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="303" x="212.75" y="69.0566">Coordination: Preventing Premature Deletion</text><line style="stroke:#666666;stroke-width:1.0;" x1="61.5" x2="103.5" y1="118.4199" y2="118.4199"/><line style="stroke:#666666;stroke-width:1.0;" x1="103.5" x2="103.5" y1="118.4199" y2="131.4199"/><line style="stroke:#666666;stroke-width:1.0;" x1="62.5" x2="103.5" y1="131.4199" y2="131.4199"/><polygon fill="#666666" points="72.5,127.4199,62.5,131.4199,72.5,135.4199,68.5,131.4199" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="68.5" y="98.3672">Process Block N</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="68.5" y="113.6777">Create .subtree_data files</text><path d="M66,144.4199 L66,184.4199 L273,184.4199 L273,154.4199 L263,144.4199 L66,144.4199 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M263,144.4199 L263,154.4199 L273,154.4199 L263,144.4199 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="72" y="161.9883">Files contain transaction data</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="72" y="177.2988">needed for catchup nodes</text><polygon fill="#666666" points="231.5,222.6621,241.5,226.6621,231.5,230.6621,235.5,226.6621" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="61.5" x2="237.5" y1="226.6621" y2="226.6621"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="68.5" y="206.6094">Update State:</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="68.5" y="221.9199">BlockPersisterHeight = N</text><polygon fill="#666666" points="231.5,267.2832,241.5,271.2832,231.5,275.2832,235.5,271.2832" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="61.5" x2="237.5" y1="271.2832" y2="271.2832"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="68.5" y="251.2305">Send BlockPersisted</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="68.5" y="266.541">Notification (height = N)</text><polygon fill="#666666" points="384.5,296.5938,394.5,300.5938,384.5,304.5938,388.5,300.5938" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="243.5" x2="390.5" y1="300.5938" y2="300.5938"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="250.5" y="295.8516">Forward Notification</text><line style="stroke:#666666;stroke-width:1.0;" x1="396.5" x2="438.5" y1="329.9043" y2="329.9043"/><line style="stroke:#666666;stroke-width:1.0;" x1="438.5" x2="438.5" y1="329.9043" y2="342.9043"/><line style="stroke:#666666;stroke-width:1.0;" x1="397.5" x2="438.5" y1="342.9043" y2="342.9043"/><polygon fill="#666666" points="407.5,338.9043,397.5,342.9043,407.5,346.9043,403.5,342.9043" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="403.5" y="325.1621">Update lastPersistedHeight = N</text><polygon fill="#666666" points="665.5,368.2148,675.5,372.2148,665.5,376.2148,669.5,372.2148" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="396.5" x2="671.5" y1="372.2148" y2="372.2148"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="257" x="403.5" y="367.4727">UpdateBlockHeight(currentHeight = 100)</text><path d="M589,385.2148 L589,410.2148 L766,410.2148 L766,395.2148 L756,385.2148 L589,385.2148 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M756,385.2148 L756,395.2148 L766,395.2148 L756,385.2148 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="156" x="595" y="402.7832">Safe Height Calculation</text><polygon fill="#666666" points="407.5,432.8359,397.5,436.8359,407.5,440.8359,403.5,436.8359" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="401.5" x2="676.5" y1="436.8359" y2="436.8359"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="413.5" y="432.0938">Get Persisted Height</text><polygon fill="#666666" points="665.5,462.1465,675.5,466.1465,665.5,470.1465,669.5,466.1465" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="396.5" x2="671.5" y1="466.1465" y2="466.1465"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="403.5" y="461.4043">persistedHeight = N</text><line style="stroke:#666666;stroke-width:1.0;" x1="677.5" x2="719.5" y1="526.0781" y2="526.0781"/><line style="stroke:#666666;stroke-width:1.0;" x1="719.5" x2="719.5" y1="526.0781" y2="539.0781"/><line style="stroke:#666666;stroke-width:1.0;" x1="678.5" x2="719.5" y1="539.0781" y2="539.0781"/><polygon fill="#666666" points="688.5,535.0781,678.5,539.0781,688.5,543.0781,684.5,539.0781" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="684.5" y="490.7148">Calculate:</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="313" x="684.5" y="506.0254">safeHeight = min(currentHeight, persistedHeight)</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="684.5" y="521.3359">safeHeight = min(100, N)</text><path d="M617.5,554.0781 L679.5,554.0781 L679.5,561.3887 L669.5,571.3887 L617.5,571.3887 L617.5,554.0781 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="233.4395" style="stroke:#000000;stroke-width:1.5;" width="278.5" x="617.5" y="554.0781"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="632.5" y="567.6465">alt</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="182" x="694.5" y="566.7129">[Block Persister Active (N = 95)]</text><line style="stroke:#666666;stroke-width:1.0;" x1="677.5" x2="719.5" y1="592.6992" y2="592.6992"/><line style="stroke:#666666;stroke-width:1.0;" x1="719.5" x2="719.5" y1="592.6992" y2="605.6992"/><line style="stroke:#666666;stroke-width:1.0;" x1="678.5" x2="719.5" y1="605.6992" y2="605.6992"/><polygon fill="#666666" points="688.5,601.6992,678.5,605.6992,688.5,609.6992,684.5,605.6992" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="684.5" y="587.957">safeHeight = 95</text><path d="M682,618.6992 L682,673.6992 L886,673.6992 L886,628.6992 L876,618.6992 L682,618.6992 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M876,618.6992 L876,628.6992 L886,628.6992 L876,618.6992 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="688" y="636.2676">Only prune up to height 95</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="688" y="651.5781">Protect blocks 96-100</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="688" y="666.8887">.subtree_data not yet created</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="617.5" x2="896" y1="680.6309" y2="680.6309"/><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="155" x="622.5" y="691.2656">[No Block Persister (N = 0)]</text><line style="stroke:#666666;stroke-width:1.0;" x1="677.5" x2="719.5" y1="715.8965" y2="715.8965"/><line style="stroke:#666666;stroke-width:1.0;" x1="719.5" x2="719.5" y1="715.8965" y2="728.8965"/><line style="stroke:#666666;stroke-width:1.0;" x1="678.5" x2="719.5" y1="728.8965" y2="728.8965"/><polygon fill="#666666" points="688.5,724.8965,678.5,728.8965,688.5,732.8965,684.5,728.8965" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="684.5" y="711.1543">safeHeight = 100</text><path d="M682,741.8965 L682,781.8965 L879,781.8965 L879,751.8965 L869,741.8965 L682,741.8965 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M869,741.8965 L869,751.8965 L879,751.8965 L869,741.8965 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="688" y="759.4648">No .subtree_data files</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="688" y="774.7754">Safe to prune current height</text><line style="stroke:#666666;stroke-width:1.0;" x1="677.5" x2="719.5" y1="831.1387" y2="831.1387"/><line style="stroke:#666666;stroke-width:1.0;" x1="719.5" x2="719.5" y1="831.1387" y2="844.1387"/><line style="stroke:#666666;stroke-width:1.0;" x1="678.5" x2="719.5" y1="844.1387" y2="844.1387"/><polygon fill="#666666" points="688.5,840.1387,678.5,844.1387,688.5,848.1387,684.5,844.1387" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="684.5" y="811.0859">Delete Records WHERE</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="684.5" y="826.3965">deleteAtHeight &lt;= safeHeight</text><path d="M682,857.1387 L682,912.1387 L869,912.1387 L869,867.1387 L859,857.1387 L682,857.1387 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M859,857.1387 L859,867.1387 L869,867.1387 L859,857.1387 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="42" x="688" y="874.707">Result</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="730" y="874.707">: Transaction data</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="688" y="890.0176">remains available until</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="688" y="905.3281">.subtree_data files created</text><text fill="#333333" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="155" x="0" y="969.2266">Last Modified On: 01-Dec-2025</text><!--SRC=[bLLDQnin4BtlhnXS2hQ9Yqj9g4rJI9niSwYT4BVqib1aQJOMsKX6qhg4ql_UaInlLXiteJeOU_JcwSsdxRrK6sRO0wmOlxypkbPYfYjju4q-pZ_cUMORXC2IrPNBjN8HyY6S5eGPet_5ovDmijOjVJh9vOOf1xypW7Dj19eKJjQka8jmiZzPrYRedLUQtyCD6YkjGzC3PY7O6jC1F5ypgM29PYivFha4Smg_CRL2aq1tfXIsTDfWl0cWO8Z8J6c7eBV4aoexQiEcC1pEDEL2AkQaLbEYmoqg9zMT__h0N4rlN625_deupBAK3KQVE_oUGdEqCJnO56fca96OTxPUEOFuKp37e9GLsYZJoBkr0rq-eyez23YLtUVE6QOiuru9U8v2AKI10agg5MUEh-iDA2qyxpzaXcnFuVj6U4LBHv_JGgNWAmnoJc7n6iqIbKWrYq8jj9Ebv26Vq5ytP8F8jki3OjgN8DVc5pC2sevP5fkWXOkYAsPTyrnRwvD7Kk6TMtXwX-xpsXYgSUFxVZmUj1kcqo1BLY94y8nLlAxOlXbQoBRIB-YQwH3HjP7NrRSv54k7E77OQ_2LiwIjyNkGAetjg4i-EE11qH-5wh3AGMUouOowROlGNn1uSZoW7G7mahQ4VN8Sy6cB9_1hLJt2nly0Qbsd8RRBvBXGD4OEkOELbsHXSZ8YfOLAfuYuuP6opSE8YGmhYzH8p-880Op_Kp-zzre0zDI1iIvKw1cAPnTRB4gCBgEfURd2OTyWt2AdrMJXnzNbxMMXHB2UxVlsqsbBRNUHT5hu5YtzVGo7K_ZsR8VuBIUL1RPbicAhYaf1-w_gPhhShQAOvwp2qj7UqJwvNsaYOQu5JI-r-pKjXhT-vFez8KRp-NpqIASt-0i0]--></g></svg>