<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1207px" preserveAspectRatio="none" style="width:809px;height:1207px;background:#F0F8FF;" version="1.1" viewBox="0 0 809 1207" width="809px" zoomAndPan="magnify"><defs/><g><rect fill="#F0F8FF" height="1207" style="stroke:none;stroke-width:1.0;" width="809" x="0" y="0"/><rect fill="none" height="137.2422" style="stroke:#000000;stroke-width:1.5;" width="232" x="10" y="112.1094"/><rect fill="none" height="165.1738" style="stroke:#000000;stroke-width:1.5;" width="443.5" x="360" y="459.5254"/><rect fill="none" height="137.2422" style="stroke:#000000;stroke-width:1.5;" width="275" x="10" y="668.0098"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="76" x2="76" y1="36.4883" y2="1155.9785"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="233.5" x2="233.5" y1="36.4883" y2="1155.9785"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="420" x2="420" y1="36.4883" y2="1155.9785"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="746.5" x2="746.5" y1="36.4883" y2="1155.9785"/><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="112" x="20" y="5"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="27" y="25.5352">Pruner Service</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="112" x="20" y="1154.9785"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="27" y="1175.5137">Pruner Service</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="119" x="174.5" y="5"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="181.5" y="25.5352">Block Assembly</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="119" x="174.5" y="1154.9785"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="181.5" y="1175.5137">Block Assembly</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="100" x="370" y="5"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="377" y="25.5352">Store Pruner</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="100" x="370" y="1154.9785"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="377" y="1175.5137">Store Pruner</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="93" x="700.5" y="5"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="707.5" y="25.5352">UTXO Store</text><rect fill="#DDDDDD" height="30.4883" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="93" x="700.5" y="1154.9785"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="707.5" y="1175.5137">UTXO Store</text><polygon fill="#666666" points="222,63.7988,232,67.7988,222,71.7988,226,67.7988" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="76" x2="228" y1="67.7988" y2="67.7988"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="83" y="63.0566">Check State</text><polygon fill="#666666" points="87,93.1094,77,97.1094,87,101.1094,83,97.1094" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="81" x2="233" y1="97.1094" y2="97.1094"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="93" y="92.3672">State = RUNNING</text><path d="M10,112.1094 L72,112.1094 L72,119.4199 L62,129.4199 L10,129.4199 L10,112.1094 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="137.2422" style="stroke:#000000;stroke-width:1.5;" width="232" x="10" y="112.1094"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="125.6777">alt</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="114" x="87" y="124.7441">[State NOT Running]</text><line style="stroke:#666666;stroke-width:1.0;" x1="76" x2="118" y1="150.7305" y2="150.7305"/><line style="stroke:#666666;stroke-width:1.0;" x1="118" x2="118" y1="150.7305" y2="163.7305"/><line style="stroke:#666666;stroke-width:1.0;" x1="77" x2="118" y1="163.7305" y2="163.7305"/><polygon fill="#666666" points="87,159.7305,77,163.7305,87,167.7305,83,163.7305" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="83" y="145.9883">Skip Pruning</text><path d="M81,176.7305 L81,216.7305 L232,216.7305 L232,186.7305 L222,176.7305 L81,176.7305 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M222,176.7305 L222,186.7305 L232,186.7305 L222,176.7305 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="87" y="194.2988">Safety: No pruning</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="87" y="209.6094">during reorgs/resets</text><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="76" x2="118" y1="228.3516" y2="228.3516"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="118" x2="118" y1="228.3516" y2="241.3516"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="77" x2="118" y1="241.3516" y2="241.3516"/><polygon fill="#666666" points="87,237.3516,77,241.3516,87,245.3516,83,241.3516" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="76" x2="118" y1="292.9727" y2="292.9727"/><line style="stroke:#666666;stroke-width:1.0;" x1="118" x2="118" y1="292.9727" y2="305.9727"/><line style="stroke:#666666;stroke-width:1.0;" x1="77" x2="118" y1="305.9727" y2="305.9727"/><polygon fill="#666666" points="87,301.9727,77,305.9727,87,309.9727,83,305.9727" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="83" y="272.9199">Deduplicate Channel</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="83" y="288.2305">(Process Latest Height)</text><path d="M27,318.9727 L27,343.9727 L795,343.9727 L795,328.9727 L785,318.9727 L27,318.9727 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M785,318.9727 L785,328.9727 L795,328.9727 L785,318.9727 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="253" x="280.25" y="336.541">PHASE 1: Preserve Parents (CRITICAL)</text><polygon fill="#666666" points="408,366.5938,418,370.5938,408,374.5938,412,370.5938" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="76" x2="414" y1="370.5938" y2="370.5938"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="320" x="83" y="365.8516">PreserveParentsOfOldUnminedTransactions(height)</text><polygon fill="#666666" points="735,411.2148,745,415.2148,735,419.2148,739,415.2148" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="420" x2="741" y1="415.2148" y2="415.2148"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="427" y="395.1621">Find Unmined Txs older than</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196" x="427" y="410.4727">(height - UnminedTxRetention)</text><polygon fill="#666666" points="431,440.5254,421,444.5254,431,448.5254,427,444.5254" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="425" x2="746" y1="444.5254" y2="444.5254"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="437" y="439.7832">Old Unmined Transaction List</text><path d="M360,459.5254 L434,459.5254 L434,466.8359 L424,476.8359 L360,476.8359 L360,459.5254 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="165.1738" style="stroke:#000000;stroke-width:1.5;" width="443.5" x="360" y="459.5254"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="375" y="473.0938">loop</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="152" x="449" y="472.1602">[For Each Old Unmined Tx]</text><polygon fill="#666666" points="735,509.457,745,513.457,735,517.457,739,513.457" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="420" x2="741" y1="513.457" y2="513.457"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="427" y="493.4043">Get Parent Transaction Hashes</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="427" y="508.7148">(from inpoints)</text><polygon fill="#666666" points="431,538.7676,421,542.7676,431,546.7676,427,542.7676" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="425" x2="746" y1="542.7676" y2="542.7676"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="437" y="538.0254">Parent TxIDs</text><polygon fill="#666666" points="735,583.3887,745,587.3887,735,591.3887,739,587.3887" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="420" x2="741" y1="587.3887" y2="587.3887"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="427" y="567.3359">Set PreserveUntil Flag</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="427" y="582.6465">on Parent Transactions</text><polygon fill="#666666" points="431,612.6992,421,616.6992,431,620.6992,427,616.6992" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="425" x2="746" y1="616.6992" y2="616.6992"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="437" y="611.957">Parents Preserved</text><polygon fill="#666666" points="87,649.0098,77,653.0098,87,657.0098,83,653.0098" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="81" x2="419" y1="653.0098" y2="653.0098"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="93" y="648.2676">Phase 1 Complete</text><path d="M10,668.0098 L72,668.0098 L72,675.3203 L62,685.3203 L10,685.3203 L10,668.0098 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="137.2422" style="stroke:#000000;stroke-width:1.5;" width="275" x="10" y="668.0098"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="681.5781">alt</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="88" x="87" y="680.6445">[Phase 1 Failed]</text><line style="stroke:#666666;stroke-width:1.0;" x1="76" x2="118" y1="706.6309" y2="706.6309"/><line style="stroke:#666666;stroke-width:1.0;" x1="118" x2="118" y1="706.6309" y2="719.6309"/><line style="stroke:#666666;stroke-width:1.0;" x1="77" x2="118" y1="719.6309" y2="719.6309"/><polygon fill="#666666" points="87,715.6309,77,719.6309,87,723.6309,83,719.6309" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="83" y="701.8887">ABORT Pruning</text><path d="M81,732.6309 L81,772.6309 L275,772.6309 L275,742.6309 L265,732.6309 L81,732.6309 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M265,732.6309 L265,742.6309 L275,742.6309 L265,732.6309 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="87" y="750.1992">Data loss prevention:</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="87" y="765.5098">Do NOT proceed to Phase 2</text><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="76" x2="118" y1="784.252" y2="784.252"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="118" x2="118" y1="784.252" y2="797.252"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="77" x2="118" y1="797.252" y2="797.252"/><polygon fill="#666666" points="87,793.252,77,797.252,87,801.252,83,797.252" style="stroke:#666666;stroke-width:1.0;"/><path d="M27,817.252 L27,842.252 L795,842.252 L795,827.252 L785,817.252 L27,817.252 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M785,817.252 L785,827.252 L795,827.252 L785,817.252 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="151" x="331.25" y="834.8203">PHASE 2: DAH Pruning</text><polygon fill="#666666" points="408,864.873,418,868.873,408,872.873,412,868.873" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="76" x2="414" y1="868.873" y2="868.873"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="83" y="864.1309">UpdateBlockHeight(height)</text><line style="stroke:#666666;stroke-width:1.0;" x1="420" x2="462" y1="913.4941" y2="913.4941"/><line style="stroke:#666666;stroke-width:1.0;" x1="462" x2="462" y1="913.4941" y2="926.4941"/><line style="stroke:#666666;stroke-width:1.0;" x1="421" x2="462" y1="926.4941" y2="926.4941"/><polygon fill="#666666" points="431,922.4941,421,926.4941,431,930.4941,427,926.4941" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="427" y="893.4414">Calculate Safe Height</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="313" x="427" y="908.752">safeHeight = min(currentHeight, persistedHeight)</text><line style="stroke:#666666;stroke-width:1.0;" x1="420" x2="462" y1="971.1152" y2="971.1152"/><line style="stroke:#666666;stroke-width:1.0;" x1="462" x2="462" y1="971.1152" y2="984.1152"/><line style="stroke:#666666;stroke-width:1.0;" x1="421" x2="462" y1="984.1152" y2="984.1152"/><polygon fill="#666666" points="431,980.1152,421,984.1152,431,988.1152,427,984.1152" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="427" y="951.0625">Queue Pruning Job</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="427" y="966.373">(LIFO: newest pending first)</text><polygon fill="#666666" points="735,1024.7363,745,1028.7363,735,1032.7363,739,1028.7363" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="420" x2="741" y1="1028.7363" y2="1028.7363"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="427" y="1008.6836">Delete Records where</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="427" y="1023.9941">deleteAtHeight &lt;= safeHeight</text><polygon fill="#666666" points="431,1054.0469,421,1058.0469,431,1062.0469,427,1058.0469" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="425" x2="746" y1="1058.0469" y2="1058.0469"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="437" y="1053.3047">Records Deleted</text><polygon fill="#666666" points="87,1083.3574,77,1087.3574,87,1091.3574,83,1087.3574" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="81" x2="419" y1="1087.3574" y2="1087.3574"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="93" y="1082.6152">Phase 2 Complete</text><path d="M81,1100.3574 L81,1140.3574 L241,1140.3574 L241,1110.3574 L231,1100.3574 L81,1100.3574 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M231,1100.3574 L231,1110.3574 L241,1110.3574 L231,1100.3574 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="87" y="1117.9258">Pruning cycle finished</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="87" y="1133.2363">Ready for next event</text><text fill="#333333" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="155" x="0" y="1197.1348">Last Modified On: 01-Dec-2025</text><!--SRC=[ZLJRJXin47ttLuoeAWL4r4AbgefAfP2m95L8Q2vI7_9YrhE9XMElR2y4LVttpdftoIua1J_aCfuvSyO-n-vUwfHRle4x7j-lhCcqw1bbB7o8FaVVeeYvvmo12S-KZupsPSgNi6eft5hpM6v-3OlLTkdJorYcN7lumm0kZHLec-aKVKca7nRxorWTuEZMPXejpD0-o1YFW3ieGisqIsNYU-WwXvixzHJIGgYADBDdtbWiSK9k2Ep3NSn_JuhTa9V_PQparFxHxD61tXg9nSnpZwon1MrABiewnJvSm7Gn7W_7runnvSlWU3A7QQQrr2iw8u1Tf-VYUvc6FrMADbHdvMhjmIIxD9wW9qPZ0scHlDGYi_GD5erTkKyM7NeN82pwp6g6MjHdgw3wAB9KoJZdrrjphL4jTUlMcXYTWn65dOS1vWoE6Gjqp0D15FMduSmwS79oE-ZEhk2iGnlKsZxG1N2BsZjezQR3-R3N7HsVdDGPr6vbLrKMJPA94WkzaHh5t7BjUEobqQwrhfZKgdEmWaOajO2o3EPR1qQHEC7JN3HKKGljAcE-dQAdRWHCW44BxPUyYCOES4S4Hj9vnfGnAKIaxoiUhvkvst3sUrbUeoyFfm4vu6wDZdWcrco0_6OadSHnmDbFhWBP3lkE7Uuto_kLvxkWSHL4YfDYgETh6kxDVkuPJ1IYQZIjIUjspHt26VJC9bLqqeKLgcZ4fIA4_JxeNawcytSOeSyz1sL8gQd5X-8kEqlTDy5hQQvYkWnlogxdhmpnbg3FgKTtK37vZu0NgI2lX6UXSCj1gJRAUbp5cShDbtkwDDgIBYF1uZUz9AIeLfpP_EoBs2caQ1qf4CNWFKr-PPXXDGFyD7Saij4meZ4rFkR-Jkaiygr4MdVGN7tCBn6c6DEJx-1nZHRfsGdHRiaClb_0ZliXKrKG1UAR2ZglAMY_3AhHugTO8KsX9Lb9BFKKkNY2X0ogSUiXA8HSYucd825PUk1e_1iZP299A1FTWO_vFRQEX6ZVtDoqdsWT7Vy3]--></g></svg>